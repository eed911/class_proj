;
; EXP1_ASM.asm
;
; Created: 3/2/2019 12:24:09 PM
; Author : hudsoc1
;


LDI R16, 0x04			;LOADS THE VALUE 0b00000100 INTO R16
LDI R20, 0x00			;LOADS THE VALUE 0b00000000 INTO R20 
OUT DDRB, R16			;SETS PULL UP RESISTOR IN B2

MAIN: 
	OUT PORTB, R16		;SETS PORTB PIN 2 HIGH
	// CALLS THE CREATED DELAY SUBROUTINE 435ms
	RCALL DELAY_435MS

	OUT PORTB, R20		;SETS ALL PINS IN PORTB LOW
	// CALLES THE CREATED DELAY SUBROUTINE 270ms
	RCALL DELAY_270MS
	RJMP MAIN			;CREATES ENDLESS LOOP FOR THE WAVE GENERATED

	//CREATED FUNCITON FOR A DELAY OF 435ms
	//USES 4x DELAY 100ms, 3x DELAY 10ms, 1x DELAY 5ms 
DELAY_435MS:
	RCALL DELAY_100MS
	RCALL DELAY_100MS
	RCALL DELAY_100MS
	RCALL DELAY_100MS
	RCALL DELAY_10MS
	RCALL DELAY_10MS
	RCALL DELAY_10MS
	RCALL DELAY_5MS
	RET

	//CREATED FUNCITON FOR A DELAY OF 270ms
	//USES 2x DELAY 100ms, 3x DELAY 10ms, 1x DELAY 50ms
DELAY_270MS:
	RCALL DELAY_100MS
	RCALL DELAY_100MS
	RCALL DELAY_50MS
	RCALL DELAY_10MS
	RCALL DELAY_10MS
	RCALL DELAY_10MS
	RET

	//CREATED FUNCITON FOR A DELAY OF 100ms
	//USES 2x DELAY 50ms
DELAY_100MS:
	RCALL DELAY_50MS
	RCALL DELAY_50MS
	RET

	//CREATED FUNCITON FOR A DELAY OF 100ms
	//USES 5x DELAY 10ms
DELAY_50MS:
	RCALL DELAY_10MS
	RCALL DELAY_10MS
	RCALL DELAY_10MS
	RCALL DELAY_10MS
	RCALL DELAY_10MS
	RET

	//CREATED FUNCITON FOR A DELAY OF 100ms
	//USES 2x DELAY 5ms
DELAY_10MS:
	RCALL DELAY_5MS
	RCALL DELAY_5MS
	RET

	//CREATED FUNCITON FOR A DELAY OF 100ms
	//USES 5x DELAY 1ms
DELAY_5MS:
	RCALL DELAY_1MS
	RCALL DELAY_1MS
	RCALL DELAY_1MS
	RCALL DELAY_1MS
	RCALL DELAY_1MS
	RET

	//CREATED FUNCITON FOR A DELAY OF 1ms
DELAY_1MS:
	PUSH R16				;PUSHES VALUE OF R16 ONTO STACK
	PUSH R18				;PUSHES VALUE OF R18 ONTO STACK
	LDI R16,255				;LOADS A VALUE OF 255 INTO R16
	LDI R18, 6				;LOADS A VALUE OF 6 INTO R18
	DELAY_1A:
		DELAY1_B:
			NOP				;SEQUECE OF DOING NOTHING TO TAKE UP 8 CLOCK CYCLES
			NOP
			NOP
			NOP
			NOP
			NOP
			NOP
			NOP
			DEC R16			;DECREMENT R16 255 TIMES
			BRNE DELAY1_B	;REPEAT THIS LOOP UNTIL R16 = 0
		DEC R18				;DECREENT R18 6 TIMES
		BRNE DELAY1_B		;REPEAT THIS LOOP UNTIL R18 = 0
		POP R18				;POP VALUE OF R18 OUT OF STACK
		POP R16				;POP VALUE OF R16 OUT OF STACK
		RET					;RETURN TO THE WHEN WAS CALLED
